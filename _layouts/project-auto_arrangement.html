<!DOCTYPE html>
<html lang="en">

{% include head.html %}

<body id="page-top">
  {% include nav.html %}
  <section class="bg-white" id="">
      <div class="container no-gutter">
        <div class="row"><p class="h1"></p></div>
        <div class="row"><p class="h1"></p></div>
        <div class="row"><p class="h1"></p></div>
        <div class="row"><p class="h1"></p></div>
        <div class="row"><p class="h1"></p></div>
          <div class="row">
              <div class="col-lg-12 text-center">
                  <h2 class="section-heading">Algorithm Arrangement via Search and Style Transfer</h2>
                  <hr class="primary">
              </div>

            <p class="h3">Motivation</p>

            <p class='text-justify'>
              If you ask a piano improvisor how he can arrange an accompaniment for a song instantly, he/she may well tell you: "I'm not arranging it myself. I'm just borrowing from Rahmaninov!" In many cases like this, musicians derive such improvisational arrangement by retrieving proper piano pieces he/her has mastered before, and then playing it with perhaps only tiny modification. Hence we wonder, if we acquire a large dataset of music corpus (just as what the improvisor does in his/her head), then can we generate pleasing arrangement for a melody query by searching for proper target arrangements from the dataset? This will come to an automatic arrangement system, which can be further applied on line, rendering amzing experience with improvizational automatic accompaniment.
            </p>

            <p class="h3">Approach</p>

            <p class='text-justify'>
              Our search scheme is shown in the figure below. First of all, we need a dataset composed of melody-accompaniment pairs. For a melody query <em>Q<sub>M</sub></em>, we first search for the melody target <em>T<sub>M</sub></em> which is most "similar"to <em>Q<sub>M</sub></em> from the dataset. The criterion of "similarity", which we refer to as our <em>Search Strategy</em>, is rule-based. When we have <em>T<sub>M</sub></em>, we just need to assign <em>T<sub>M</sub></em>'s accompaniment <em>T<sub>A</sub></em> to <em>Q<sub>M</sub></em> and the arrangement is done. 
            </p>

            <p class='text-justify'>Is it really that simple? In fact, if we arrange for a small music segment (e.g., two bars), it is okey to directly assign <em>T<sub>A</sub></em> to <em>Q<sub>M</sub></em> when we have a dataset which is big enough. However, when we turn to longer pieces (e.g., eight-bar phrases), it will be hard to find perfectly matched targets and the assignment will be inproper. In fact direct assignment is not what exactly a real improvisor would do either, and modification is always necessary for better consonance. Therefore, we manage to munipulate <em>T<sub>A</sub></em>'s chord in the latent space by substituting its latent code with that from <em>Q<sub>M</sub></em>'s true chord. Such latent manipulation is realized by feeding <em>T<sub>A</sub></em> to Poly-Disentanglement VAE, disentangle the latent codes into <em>Z<sub>txt</sub></em> (for texture) and <em>Z<sub>chd</sub></em> (for chord), and regenerate <em>T<sub>A</sub><sup>'</sup></em> with <em>Q<sub>M</sub></em>'s <em>Z<sub>chd</sub><sup>'</sup></em>. 
            </p>

            <img src="img/portfolio/autoarr/diagram.jpg" class="img-responsive center-block img-rounded" alt="">

            <p class='text-justify'>
            With both rule-based search strategy for locating <em>T<sub>A</sub></em> candidates, and latent manipulation for better consonant <em>T<sub>A</sub><sup>'</sup></em>, we have been able to generate arrangement for music phrases as long as eight bars.
            </p>

            <p class="h3">Baseline Method 1: Direct Assignment</p>

                <div class="row"><p class="h1"></p></div>
                <div class="col-sm-4 text-center">
                  <audio controls>
                    <source src="audio/algarr/leedSheet.ogg" type="audio/ogg" />
                    <source src="audio/algarr/leedSheet.mp3" type="audio/mpeg" />
                    <a href="audio/algarr/leedSheet.mp3">query</a>
                  </audio>
                  <p class="no-gutter">Melody Query</p>
                </div>

                <div class="col-sm-4 text-center">
                  <audio controls>
                    <source src="audio/algarr/baseline_bar.ogg" type="audio/ogg" />
                    <source src="audio/algarr/baseline_bar.mp3" type="audio/mpeg" />
                    <a href="audio/algarr/baseline_bar.mp3">arr_bar-level</a>
                  </audio>
                  <p>Arrangement</p>
                </div>

                <div class="col-sm-4 text-center">
                  <audio controls>
                    <source src="audio/algarr/baseline_bar_ref.ogg" type="audio/ogg" />
                    <source src="audio/algarr/baseline_bar_ref.mp3" type="audio/mpeg" />
                    <a href="audio/algarr/baseline_bar_ref.mp3">target_bar-level</a>
                  </audio>
                  <p>Searched Targets</p>
                </div>

            <p class="h3">Baseline Method 2: Latent Manipulation under Random Search</p>

                <div class="row"><p class="h1"></p></div>
                <div class="col-sm-4 text-center">
                  <audio controls>
                    <source src="audio/algarr/leedSheet.ogg" type="audio/ogg" />
                    <source src="audio/algarr/leedSheet.mp3" type="audio/mpeg" />
                    <a href="audio/algarr/leedSheet.mp3">query</a>
                  </audio>
                  <p class="no-gutter">Melody Query</p>
                </div>

                <div class="col-sm-4 text-center">
                  <audio controls>
                    <source src="audio/algarr/baseline_random.ogg" type="audio/ogg" />
                    <source src="audio/algarr/baseline_random.mp3" type="audio/mpeg" />
                    <a href="audio/algarr/baseline_random.mp3">arr_phrase_random_search</a>
                  </audio>
                  <p>Arrangement</p>
                </div>
    
                <div class="col-sm-4 text-center">
                  <audio controls>
                    <source src="audio/algarr/baseline_random_ref.ogg" type="audio/ogg" />
                    <source src="audio/algarr/baseline_random_ref.mp3" type="audio/mpeg" />
                    <a href="audio/algarr/baseline_random_ref.mp3">target_phrase_random_search</a>
                  </audio>
                  <p>Searched Targets</p>
                </div>

              <p class="h3">Baseline Method 3: Latent Manipulation under Rule-Based Search Strategy</p>

                  <div class="row"><p class="h1"></p></div>
                  <div class="col-sm-4 text-center">
                    <audio controls>
                      <source src="audio/algarr/leedSheet.ogg" type="audio/ogg" />
                      <source src="audio/algarr/leedSheet.mp3" type="audio/mpeg" />
                      <a href="audio/algarr/leedSheet.mp3">melody</a>
                    </audio>
                    <p class="no-gutter">Melody Query</p>
                  </div>

                  <div class="col-sm-4 text-center">
                    <audio controls>
                      <source src="audio/algarr/new_1.ogg" type="audio/ogg" />
                      <source src="audio/algarr/new_1.mp3" type="audio/mpeg" />
                      <a href="audio/algarr/new_1.mp3">arr1_phrase_rule-based_search</a>
                    </audio>
                    <p>Arrangement</p>
                  </div>
      
                  <div class="col-sm-4 text-center">
                    <audio controls>
                      <source src="audio/algarr/new_1_ref.ogg" type="audio/ogg" />
                      <source src="audio/algarr/new_1_ref.mp3" type="audio/mpeg" />
                      <a href="audio/algarr/new_1_ref.mp3">target1_phrase_rule-based_search</a>
                    </audio>
                    <p>Searched Targets</p>
                  </div>



                  <div class="row"><p class="h1"></p></div>
                  <div class="col-sm-4 text-center">
                    <audio controls>
                      <source src="audio/algarr/leedSheet.ogg" type="audio/ogg" />
                      <source src="audio/algarr/leedSheet.mp3" type="audio/mpeg" />
                      <a href="audio/algarr/leedSheet.mp3">query</a>
                    </audio>
                    <p class="no-gutter">Melody Query</p>
                  </div>

                  <div class="col-sm-4 text-center">
                    <audio controls>
                      <source src="audio/algarr/new_2.ogg" type="audio/ogg" />
                      <source src="audio/algarr/new_2.mp3" type="audio/mpeg" />
                      <a href="audio/algarr/new_1.mp3">arr2_phrase_rule-based_search</a>
                    </audio>
                    <p>Arrangement</p>
                  </div>
      
                  <div class="col-sm-4 text-center">
                    <audio controls>
                      <source src="audio/algarr/new_2_ref.ogg" type="audio/ogg" />
                      <source src="audio/algarr/new_2_ref.mp3" type="audio/mpeg" />
                      <a href="audio/algarr/new_2_ref.mp3">target2_phrase_rule-based_search</a>
                    </audio>
                    <p>Searched Targets</p>
                  </div>
        
          
                
          </div>

          
      </div>
</section>
{% include scripts.html %}
  </body>
</html>
